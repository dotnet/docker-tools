parameters:
  repo: null
  acr: null
  action: null
  age: null
  customArgs: ""
  internalProjectName: null
  publishConfig: null
steps:
  - template: /eng/common/templates/steps/run-imagebuilder.yml@self
    parameters:
      displayName: Clean ACR Images - ${{ parameters.repo }}
      serviceConnections:
      - name: acr
        id: ${{ parameters.publishConfig.cleanServiceConnection.id}}
        tenantId: ${{ parameters.publishConfig.cleanServiceConnection.tenantId}}
        clientId: ${{ parameters.publishConfig.cleanServiceConnection.clientId }}
      internalProjectName: ${{ parameters.internalProjectName }}
      args: >-
        cleanAcrImages
        ${{ parameters.repo }}
        ${{ parameters.acr.subscription }}
        ${{ parameters.acr.resourceGroup }}
        ${{ parameters.acr.server }}
        --action ${{ parameters.action }}
        --age ${{ parameters.age }}
        ${{ parameters.customArgs }}
