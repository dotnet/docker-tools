parameters:
  commitDigest: null
  condition: true
  dryRunArg: ""

steps:
- ${{ if eq(variables['waitForIngestionEnabled'], 'true') }}:
  - template: /eng/common/templates/steps/run-imagebuilder.yml@self
    parameters:
      displayName: Wait for MCR Doc Ingestion
      condition: ${{ parameters.condition }}
      serviceConnection: $(marStatus.serviceConnectionName)
      internalProjectName: 'internal'
      args: >
        waitForMcrDocIngestion
        '${{ parameters.commitDigest }}'
        --timeout '$(mcrDocIngestionTimeout)'
        ${{ parameters.dryRunArg }}
